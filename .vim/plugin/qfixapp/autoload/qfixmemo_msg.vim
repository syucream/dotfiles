if v:version < 700 || &cp
  finish
endif
scriptencoding utf-8

let s:qfixmemo_submenu_msg = [
 \ '------------------------',
 \ '= サブメニュー',
 \ 'このバッファの変更は',
 \ '自動的に保存されます。',
 \ ' q   : 終了',
 \ '------------------------',
 \ '= カレンダー',
 \ '< i  前月 | 次月  o > ',
 \ 't .  今日の日付へ',
 \ '(数値)<CR> 指定日の日記',
 \ '------------------------',
 \ '= アウトライン機能',
 \ '!!! 折り畳まれた行は !!!',
 \ '!!!  l で開きます。  !!!',
 \ '*レベル',
 \ '	タブでインデントすると',
 \ '	レベルが変更されます。',
 \ '	レベルは4段階あります。',
 \ '		レベルに応じて',
 \ '		異なるシンタックスで',
 \ '		強調表示されます。',
 \ '			レベルが違う',
 \ '			レベルが違う',
 \ '			レベルが違う',
 \ '				レベルが違う',
 \ '				レベルが違う',
 \ '				レベルが違う',
 \ '*フォールディング',
 \ '	インデントを利用して、',
 \ '	折り畳みが使用可能です。',
 \ '		この行で zc を',
 \ '		実行してください。 ',
 \ '		行が折り畳まれたら、',
 \ '		l で閉じられた',
 \ '		折り畳みを開けます。',
 \ '*タイトル',
 \ '	行頭が . * ・ だと',
 \ '	タイトル行として',
 \ '	.タイトル行',
 \ '		強調表示されます。',
 \ '*ラベル',
 \ '	行頭が - + だと',
 \ '	ラベルとして',
 \ '	強調表示されます。',
 \ '	-りんご',
 \ '	+ごりら',
 \ '	+らっぱ',
 \ '*コメント',
 \ '	# 行頭が # だと',
 \ '	# コメントとして',
 \ '	# 強調表示されます。',
 \ '	# コメント行は',
 \ '	# 折り畳まれません。',
 \ '',
 \ '------------------------',
 \ '= オプション',
 \ '------------------------',
 \ '',
 \ '*サブメニュー',
 \ '# ウィンドウ幅',
 \ 'let SubWindow_Width = 30',
 \ '',
 \ '# タイトル指定',
 \ '# タイトル名はユニークなものを指定してください。',
 \ '# タイトル名ではなくパスを含めてファイル指定も行えます。',
 \ '# (相対パスも使用可能です)',
 \ 'let SubWindow_Title =  "__submenu__"',
 \ 'let SubWindow_Title =  "../__submenu__"',
 \ '',
 \ '# 複数のサブメニュー指定',
 \ '# (デフォルトでは未設定)',
 \ 'let SubWindow_Title1 = "__submenu1__"',
 \ 'let SubWindow_Title2 = "__submenu2__"',
 \ 'let SubWindow_Title3 = "__submenu3__"',
 \ '...',
 \ '',
 \ '*アウトライン',
 \ '# 起動時から折り畳みを有効',
 \ 'let qfixmemo_outline_foldenable = 1',
 \ '',
 \ '# wrap表示',
 \ 'let qfixmemo_outline_wrap = 1',
 \ '',
 \ '------------------------',
 \ '= キーワード',
 \ '------------------------',
 \ 'このバッファはキーワードリンク作成の対象です。',
 \ '[[keyword]]',
 \ ' g,w で保存すると、',
 \ '"keyword"がリンク化されます。',
 \ '',
 \ '------------------------',
 \ '= その他',
 \ '------------------------',
 \ 'その他は普通のメモファイルとして使用可能です。',
 \ '',
 \ '詳細は doc/qfixmemo.jaxを参照してください',
 \ '']

function! qfixmemo_msg#submenu()
  if !exists('g:loaded_qfixmemo') || (exists('g:QFixHowm_Convert') && g:QFixHowm_Convert)
    call map(s:qfixmemo_submenu_msg, 'substitute(v:val, "qfixmemo_submenu_width", "SubWindow_Width", "g")')
    call map(s:qfixmemo_submenu_msg, 'substitute(v:val, "qfixmemo_submenu_title", "SubWindow_Title", "g")')
  endif
  call setline(1, s:qfixmemo_submenu_msg)
endfunction
